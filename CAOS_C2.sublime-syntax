%YAML 1.2
---
# See http://www.sublimetext.com/docs/3/syntax.html
file_extensions:
  - cos
name: 'Creatures 2'

first_line_match: '\*\s*([Cc][Aa]?[Oo][Ss]\s*|[@]?[Vv][Aa][Rr][Ii][Aa][Nn][Tt])(\(\s*[Cc][2]\s*\)|\s*[:]\s*[Cc][2])'
scope: source.caos.c2
contexts:
  main:

    - match: '\s*\*.*$'
      scope: comment.line.caos
    - match: '(\b([Aa][Dd][Dd][Vv])\b)'
      comment: '{var} = {var} + {sum}'
      scope: entity.name.function.caos
      push: [rvalue,lvalue]

    - match: '([Aa][Ii][Mm][:])'
      comment: 'Set the target point on the [_IT_] object for subsequent [APPR] and [TOUC] commands.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Aa][Nn][Dd][Vv])\b)'
      comment: '{value1} = {value1} & {value2}'
      scope: entity.name.function.caos
      push: [rvalue,lvalue]

    - match: '(\b([Aa][Nn][Ii][Mm])\b)'
      comment: 'Start animation of [TARG] object or part, using the poses specified.\nAnimations ending in R will\nrepeat indefinitely.\nNote: For objects the entries are single digit poses,\nfor creatures the entries\nare 3 digit poses.\nMax length of animation string in both cases is 32 digits'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Aa][Pp][Pp][:])\s*([Qq][Uu][Ii][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Close the applet with the given id'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Aa][Pp][Pp][Rr])\b)'
      comment: 'Approach [_IT_]\nChose a walking gait according to chemo-receptors, then start walking towards\n[_IT_].\nContinue with next instruction when you are within reach'
      scope: entity.name.function.caos

    - match: '(\b([Aa][Ss][Ee][Aa])\b)'
      comment: 'Advance Season. Move to the beginning of next season.'
      scope: entity.name.function.caos

    - match: '(\b([Aa][Ss][Ll][Pp])\b)'
      comment: 'Sets/returns whether a creature is asleep. When asleep the eyes close and the creature becomes\ninsensible to some stimuli. A change of action automatically wakes creature up again.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Bb][Aa][Ss][Ee])\b)'
      comment: 'Specify the base image number for this object/part.\nCan be used to allow anims from a large table\nof images by moving base sprite number around table.\nThis is the only way to use [ANIM] on an object\nwith more that 10 images in its image gallery\nbecause [ANIM] uses a single digit to specify poses.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Bb][Bb][Dd][:])\s*([Ee][Mm][Ii][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: '{emit} values:\n\t{n} = 0 - Broadcast as read. ie. to creatures looking at the blackboard\n\t{n} > 0\n- Broadcast as Audible ie. to all creatures in earshot'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Bb][Bb][Dd][:])\s*([Ss][Hh][Oo][Ww])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: '{show} value of:\n\t0 = wipes text from blackboard\n\t1 = draws current text string (ov00) onto part\n0'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Bb][Bb][Dd][:])\s*([Vv][Cc][Bb][1])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Set BlackBoard Vocabulary word.\nThis is used to move a single word from the game word list into a\nspecific blackboard objects word list.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '([Bb][Bb][Dd][:])\s*([Vv][Oo][Cc][Bb])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Set Blackboard Vocabulary.\nThis is used to move words from the game word list into a specific\nblackboard objects word list.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '([Bb][Bb][Dd][:])\s*([Ww][Oo][Rr][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Install a single named word into the blackboards word list.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Bb][Bb][Ff][Dd])\b)'
      comment: 'Specifies the target colour of the text in the given textpart. The bubble will then fade the text\ninto this colour.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '(\b([Bb][Bb][Ll][Ee])\b)'
      comment: 'Create a speech bubble object containing the given text for the specified number of ticks.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '([Bb][Bb][Tt][2])'
      comment: 'Specify a text string to be used for the given textpart'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Bb][Bb][Tt][Xx])\b)'
      comment: 'Associate a text string in the application resource table with the given text part.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Bb][Hh][Vv][Rr])\b)'
      comment: 'Sets/returns the reactions to clicks by mouse and activation requests by a creature. The values for\nclick and touch are listed in the reference section'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Cc][Aa][Bb][Nn])\b)'
      comment: 'Set the relative co-ordinates for a vehicle cabin, the place where creatures are held.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '(\b([Cc][Bb][Rr][Gg])\b)'
      comment: 'Call Button register.\nNotifies the last created lift of this call button’s position.\nThis sets\nthe floor level of the lift to be the room surface at this position.'
      scope: entity.name.function.caos

    - match: '(\b([Cc][Bb][Rr][Xx])\b)'
      comment: 'Call Button register extended.\nNotifies the last created lift of this call button and the specified\nposition.\nThis sets the floor level of the lift to be the room surface at the specified position.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Cc][Hh][Ee][Mm])\b)'
      comment: 'Adds the amount given.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Dd][Bb][Gg][Mm])\b)'
      comment: 'Displays string as a trace message'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Dd][Bb][Gg][Vv])\b)'
      comment: 'Sends the value of {rvalue}. Same as [DBUG] but doesn’t force all commands to run in an [INST].'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Dd][Bb][Uu][Gg])\b)'
      comment: 'All commands after this will run in an [INST], sends the value of {rvalue}.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Cc][Ee][Ll][Ll])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get statistics about this neurone, in the following format: Output\nState\nNumber of dendrites of\nthat type\nTotal susceptibility\nTotal short term weight\nTotal long term weight\nTotal strength\nThe\ndendrite values are totalled from all dendrites of the given dentype, for a numbered lobe and cell.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Dd][Ee][Nn][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Returns dendrite information for a lobe, cell and dend type.\nOutput is:\nNUM_DENDRITES|SRC_LOBE|{dentrite_data}*\nDendrite Data: XY{Strength}'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Dd][Ii][Ee][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Update the number of norns that have died in the world'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Nn][Ee])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Output the number of genes for the following 14 types: \nBrain Lobe\nChemical receptor\nChemical\nemitter\nChemical reaction\nChemical half life\nChemical starting concentration Organ\nCreature\nstimulus\nCreature genus\nCreature appearance\nCreature pose\nCreature gait\nCreature instinct\nCreature\npigment'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Aa][Ll][Ll][Rr])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'ALL Rooms property value. Returns a particular property for all rooms.\n0 = left, 1 = top, 2 =\nright, 3 = bottom, 4 = type, 5 = floor value, 6 = organic nutrient, 7 = inorganic nutrient,\n8 =\ntemperature, 9 = pressure, 10 = wind x component, 11 = wind y component, 12 = light level, 13 =\nradiation, 14 = heat source, 15 = pressure source, 16 = light source, 17 = radiation source, 18 =\nvisited flag.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Bb][Ii][Oo][Cc])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get biochemistry buffer. Returns a string of the target creatures chemical concentrations in the\nformat “123|33|0|...|”. The string contains 256 values – as there is one entry for every\nchemical slot.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Cc][Nn][Aa][Mm])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Write creatures name to buffer.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Cc][Tt][Ii][Mm])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get the amount of time the creature has been alive.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Dd][Aa][Tt][Aa])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Gets all creature data in the following format. Each entry is separated with ‘|’\nMoniker\n(Int)\nName\nMother''s Moniker (Int)\nMother''s Name\nFather''s Moniker (Int)\nFather''s Name\nBirth date\n- Format: HH:mm MMM DD YYY\nBirth place\nOwner Name\nWebsite\nNotes\nOwner''s Email\nState of Creature –\n0=ok, 1=dead, 2=exported\nGender\nAge\nExample: \n1381517362|Sanchito|1853125733||1853125733||08:23 Dec\n29 2020|The birthplace|Darien|https:\www.darien.fake|My dear Sanchito es mi\nvida|darien@fake-email.com|0|1|0|'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Ee][Mm][Tt][Rr])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get Emitter Buffer. Returns an integer specifying how many emitters the Targ creature’s specified\norgan contains followed by the data for each emitter in the format “1|2|33|”. The sequence of\norgan data is as follows:\nLocus organ identifier (byte) Locus tissue identifier (byte) Locus\nspecifier (byte) Chemical emitted (byte) Emission threshold (byte) Emission rate (byte)\nGain\n(byte)\nEffect flags (byte)\nCurrent value of source locus (byte).'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Ll][Vv][Oo][Bb])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Locate Visited Objects. Returns a list of X / Y positions for all the objects matching <f, g, s>\nthat are in rooms that have been visited. After each objects details is an ampersand to allow later\nexpansion if needed.\nReturns: X|Y|&|'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Mm][Oo][Nn][Kk])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get the creatures moniker in the form ‘464f4536’ rather than ‘6EOF’'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Nn][Ee][Ww][Vv])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'NEWly Visited rooms. Returns a list of room IDs for all rooms visited since the last query.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Oo][Rr][Gg][Nn])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get organ buffer. Returns an integer specifying how many organs the target creatures biochemistry\ncontains followed by the data for each organ in the format “1|2|4|55|”. The sequence of organ\ndata is as follows:\nClock Rate (byte)\nClock (byte)\nBioTick (unsigned integer)\nLifeForce (byte\nfraction of short term lifeforce) Initial LifeForce (float)\nShort Term LifeForce (float)\nLong Term\nLifeForce (float)\nLong Term Rate Of Repair (integer)\nLong Term Rate Of Repair Modifier (integer)\nInjury To Apply Next Activation (integer) EnergyCost (integer)\nDamage Due To ZeroEnergy (integer)\nReceptor Count (integer)\nEmitterCount (integer)\nReactionCount (integer).'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Oo][Vv][Vv][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get observation data. This returns the following information, with each field separated with a\n‘|’ and each creature separated with a ‘&’:\nName\nMoniker\nSex – 1=male, 2=female\nAge – in\n“hours:mins”\nPregnancy – either “N/A”, “No” or number\nLife Force – either number\nterminated in % or “Dead” Medical – either “Healthy”, “Sick” or “Dead”\nRoom –\nnumber of room they are in\nXpos\nYpos'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Rr][Cc][Pp][Rr])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Gets Receptor information for a given ORGAN.\nOutput Format:\nNUM_RECEPTORS|*RECEPTOR_INFORMATION*\nReceptor Information each receptor =\nORGAN_ID|TISSUE_ID|LOCUS_ID|CHEMICAL|THRESHOLD|GAIN|EFFECT|DEST'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Rr][Cc][Tt][Nn])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get Reaction Buffer. Returns an integer specifying how many reactions the Targ creature’s\nspecified organ contains followed by the data for each reaction in the format “1|2|33|”. The\nsequence of organ data is as follows:\nProportion of reactant 1 (byte) Chemical - reactant 1 (byte)\nProportion of reactant 2 (byte) Chemical – reactant 2 (byte) Rate of decay (byte) Proportion of\nproduct 1 (byte) Chemical - product 1 (byte) Proportion of product 2 (byte) Chemical – product 2\n(byte)'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Rr][Pp][Tt][Yy])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Returns properties of specified room# as a string. Results are in the following\norder:\nTemperature\nPressure\nWind X\nWind Y\nLight level Radiation\nOrganic Nutrients Inorganic\nNutrients'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Rr][Rr][Cc][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Room ReCTangles returns the ID, RECT structure and VISITED flag for every room.\nReturns:\nID|top|left|bottom|right|VISITED(0=NO,1=YES)| Ampersand as room data separator |'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ee][Tt][Bb] [Ss][Ss][Ff][Cc])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Get SurFaCe points in a room.\nFormat: points_|x1|y1|x2|y2|...\nIf room number is invalid. Returns\n''0|'''
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ii][Dd][Ss] [Ff][Mm][Ll][Yy])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Returns a list of all genuses that exist from within a certain family number.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ii][Dd][Ss] [Gg][Nn][Uu][Ss])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Returns a list of all species that exist from within a certain family and genus number'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ii][Dd][Ss] [Rr][Oo][Oo][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Returns a list of all the Family numbers that exist, separated with a space.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Gg][Ii][Dd][Ss] [Ss][Pp][Cc][Ss])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Returns a list of all events that exist from within a certain family genus and species'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Hh][Aa][Tt][Cc])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Update the number of hatchery norns in the world.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Ll][Ii][Vv][Ee])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Update the number of natural born norns in the world.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Ll][Nn][Ee][Uu])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Returns info about all firing cells in the brain. All numbers returned by this command are scaled\nto range from 0 to 63 then added to ascii ‘0’ to keep them in printable range.\nEach firing\nneurone is returned in the following format: XYS[den0info][den1info]\nX and Y is the neurone\nposition, and S is the neurone state.\nDen0info and Den1info are only sent depending on the flags\nfield:\nflags:\n0 = output type 0 dens\n1 = output type 1 dens\nThe dendrite info format begins with a\nnumber indicating how many dendrites are feeding the cell, followed by a list of dendrites in the\nformat:\nXYS\nWhere X,Y and S are the position and state of the source neuron.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Ll][Oo][Bb][Ee])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Output locations and information about brain lobes. The first number returned is the number of\nlobes, and then the information about them is returned in the following format, with the ‘|’\nsymbol separating fields:\n\t-X position start\n\t-Y position\nstart\n\t-Width\n\t-Height\n\t-Flags\n\t-Number of Dendrites \n\t-Dendrite type 0 source \n\t-Dendrite\ntype 0 minimum \n\t-Dendrite type 0 maximum \n\t-Dendrite type 1 source \n\t-Dendrite type 1 minimum\n\n\t-Dendrite type 1 maximum'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Nn][Aa][Cc][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Neural activity. Returns pipe-delimited numbers. First number is the number of brain lobes, each\nlobe then has an entry of the format “1|2|3” , where the sequence is in the following\norder:\nNumber Of Cells Cell Flags\nFire Count Total Output Total State'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Nn][Ee][Gg][Gg])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Update number of natural eggs in the world.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Pp][Aa][Nn][Cc])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Pan camera to the creature.'
      scope: entity.name.function.caos

    - match: '([Dd][Dd][Ee][:])\s*([Pp][Ii][Cc][2])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'PICture. Replaces macro PICT. This takes a snapshot of the currently selected creature of size\nwidth and height and saves it in the filename specified. The format of the file is S16. Note that\nthe picture will be clipped by the top and bottom edges of the world and by the viewport. This will\nresult in an image smaller than requested.\nReturns a string “1” if successful, “0” if not.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Pp][Uu][Tt][Bb])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Write from string to location determined by option token\n#{dde: putb [CREATURE_NAME] cnam} sets the\ncreatures name, but does not teach the creature its own name. For that use the extended #{dde: putb\n[...data...] data}.\n\nFor DDE: PUTB [string] DATA, expected the following fields, separated by a\n''|'' character:\nMoniker (Int)\nName\nMother''s Moniker (Int)\nMother''s Name\nFather''s Moniker\n(Int)\nFather''s Name\nBirth date - Format: HH:mm MMM DD YYY\nBirth place\nOwner\nName\nWebsite\nNotes\nOwner''s Email\nState of Creature – 0=ok, 1=dead, 2=exported\nGender\nAge\n\nUse:\n[DDE: GETB DATA] to get initial data\n\nExample\n#{dde: putb [1381517362|Sanchito|1853125733|Mother\nDearest|1853125733|Pa''|08:23 Dec 29 2020|Jungle|Darien|https:\www.darien.fake|My Sanchito, a\ncupcake for us all|darien@fake-email.com|0|1|0|]}'
      scope: entity.name.function.caos
      push: [token,rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Pp][Uu][Tt][Ss])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send a string to the output window.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Pp][Uu][Tt][Vv])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Display the value of {rvalue}'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Ss][Cc][Rr][Pp])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'fetch a script from the scriptorium and send it (used by script editor for reading out & editing\nexisting scripts'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '([Dd][Dd][Ee][:])\s*([Ww][Oo][Rr][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Read a word from the TARG blackboards word list. Sends the response of ‘###|text|’ where\n‘###’ is the vocabulary slot for the idea represented by the blackboard picture whose index is\nindex, and ‘text’ is the word it knows for it.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Dd][Ee][Ll][Nn])\b)'
      comment: 'Delete Neighbour doors. Removes all neighbours for a room. Does not actually delete the rooms, just\nthe relationship between room and the neighbours'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Dd][Ee][Ll][Rr])\b)'
      comment: 'Remove the room from the map.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Dd][Ii][Vv][Vv])\b)'
      comment: '{value1} = {value1} / {value2}'
      scope: entity.name.function.caos
      push: [rvalue,lvalue]

    - match: '(\b([Dd][Oo][Ii][Ff])\b)'
      comment: 'Do next instructions if condition is true, else skip to after correct nested [ELSE] or [ENDI]'
      scope: keyword.control.caos
      push: [rvalue, eqOp, rvalue]

    - match: '(\b([Dd][Oo][Nn][Ee])\b)'
      comment: 'This voluntary or involuntary action has been completed.'
      scope: entity.name.function.caos

    - match: '(\b([Dd][Pp][Aa][Ss])\b)'
      comment: 'Drop all passengers with gravity\nThis works the same way as specifying #{dps2 1}'
      scope: entity.name.function.caos

    - match: '([Dd][Pp][Ss][2])'
      comment: 'Drop Passengers 2. Causes any creatures carried by the vehicle to be ‘dropped’.\nGravity\n\t0 -\nGravity not activated on object\n\tnon-zero - gravity is activated on object'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Dd][Rr][Ee][Aa])\b)'
      comment: 'Start dreaming. This starts processing of any pending instincts instead of receiving sensory data\nfrom the environment. Normally this should only be done during deep sleep and during embryology.\nmax\npending instincts will be processed and then dream state switches off automatically.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Dd][Rr][Oo][Pp])\b)'
      comment: 'Drop any objects you are carrying'
      scope: entity.name.function.caos

    - match: '(\b([Ee][Dd][Ii][Tt])\b)'
      comment: 'Adds TARG agent to hand'
      scope: entity.name.function.caos

    - match: '(\b([Ee][Ll][Ss][Ee])\b)'
      comment: 'Hit an [ELSE] during normal processing (ie. previous [DOIF] was true), so jump from here to\ncorresponding [ENDI], skipping any nested [DOIF]s en route'
      scope: keyword.control.caos

    - match: '(\b([Ee][Nn][Dd][Ii])\b)'
      comment: 'Marks end of a [DOIF] or [DOIF]/[ELSE] statement'
      scope: keyword.control.caos

    - match: '(\b([Ee][Nn][Dd][Mm])\b)'
      comment: 'Compulsory command at end of macro, placed there by Macro constructor Macro is terminated and maybe\nself-destructs only [STOP] (never [ENDM]) commands may be placed in the body of macro. [ENDM] is\nstring terminator'
      scope: keyword.control.caos

    - match: '(\b([Ee][Nn][Uu][Mm])\b)'
      comment: '[ENUM]...[NEXT]\nIterate through each object which conforms to the given classification,\nsetting\n[TARG] to point to each valid object in turn.\nFamily, Genus and/or Species can be zero to act as\nwildcards.'
      scope: keyword.control.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Ee][Ss][Cc][Nn])\b)'
      comment: '...[NSCN]\nEnumerate all specified scenery objects.'
      scope: keyword.control.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Ee][Ss][Ee][Ee])\b)'
      comment: 'ESEE...[NEXT]\nEnumerate across all specified objects that can be seen by the [OWNR] object.\nNote:\nAll commands between [ESEE] and [NEXT] run as [INST]. [TARG] is returned to [OWNR] (in event\nscripts) after enumeration.'
      scope: keyword.control.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Ee][Tt][Cc][Hh])\b)'
      comment: 'ETCH...[NEXT]\nEnumerate across all specified objects are touching the [OWNR] object.\nNote: All\ncommands between [ESEE] and [NEXT] run as [INST]. [TARG] is returned to [OWNR] (in event scripts)\nafter enumeration.'
      scope: keyword.control.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Ee][Vv][Ee][Rr])\b)'
      comment: 'Part of a [LOOP]-[EVER] statement. Repeat loop forever.'
      scope: keyword.control.caos

    - match: '(\b([Ee][Vv][Nn][Tt])\b)'
      comment: 'Adds an event label to the Event Bar, the three types possible are BIRTH, DEATH and EGG.\nTo get a\ndeath event call this macro with targ as OWNR in it’s death script.\nTo get a birth event call this\nmacro with targ as a new creature To get an egg event call this macro with targ as a newly created\negg object.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Ee][Xx][Ee][Cc])\b)'
      comment: 'Execute a tool or other application.\nExample: exec [fsp.exe] [params] \nExample: exec\n[c:\path\fsp.exe] [params]\nIf fsp contains backslashes, it must be a full path, so execute GP\nprogram.\nIf no backslashes, assume it''s a tool, so try both hard drive AND CD-ROM\n[params] are the\ncommand-line params for the program (or use [] if none)'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Ff][Aa][Dd][Ee])\b)'
      comment: 'Fade out any controlled sound currently playing with this [TARG].'
      scope: entity.name.function.caos

    - match: '(\b([Ff][Ii][Rr][Ee])\b)'
      comment: 'Fire the neurone whose position is at xy – amount is the signal strength (0-255)'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Gg][Pp][Aa][Ss])\b)'
      comment: 'Get passengers. Loads any nearby creature into the vehicles cabin'
      scope: entity.name.function.caos

    - match: '(\b([Gg][Ss][Uu][Bb])\b)'
      comment: 'GSUBs to given [SUBR] label. Often has to scan macro for subroutine start, but always remembers the\naddress of the last subr visited, so most subrs will execute quickly in loops'
      scope: entity.name.function.caos
      push: [token]

    - match: '(\b([Ii][Mm][Pp][Tt])\b)'
      comment: 'Signify how important this (voluntary) action is. i.e. how unlikely it is that another action will\noverride this one before it has finished.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Ii][Nn][Jj][Rr])\b)'
      comment: 'Reduce the life force of the specified organ.\nAmount is in the range of (0-255) and max damage is a\n1/10 of the organs initial life force.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Ii][Nn][Ss][Tt])\b)'
      comment: 'Make the rest of this macro execute in a single tick.\nThis is used to ensure the creation of an\nobject (for example) is not interrupted during the scheduling of concurrent scripts'
      scope: entity.name.function.caos

    - match: '(\b([Kk][Ii][Ll][Ll])\b)'
      comment: 'Delete the object specified.\n@example: #{kill edit} deletes the object in the [EDIT]\nbuffer\n@example: #{kill ownr} kills the owner of the script\n@example: #{kill targ} kills the current\n[TARG] object.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Kk][Mm][Ss][Gg])\b)'
      comment: 'Knob Message. Set the object message associated with the knob.\nThis allows messages other that\nact1,act2 and deac to be sent – and also allows the usage to be altered (e.g. creature\nonly)\nflags:\n\t1=Only creature can use this knob\n\t2=Only pointer can use this knob\n\t3=Both\ncreature and pointer can use this knob message'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Kk][Nn][Oo][Bb])\b)'
      comment: 'Attach compound objects’ hotspot to a particular function.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Ll][Oo][Cc][Kk])\b)'
      comment: 'Prevents the execution of other event scripts taking place on this object and hence interrupting\nthis script.\nNote that this will result in lost events and messages. Any script that contains a LOCK\nshould also contain an UNLK. This will not prevent the execution of a SCRIPTEXCEPTION macro script\nhowever.'
      scope: entity.name.function.caos

    - match: '(\b([Ll][Oo][Oo][Pp])\b)'
      comment: 'Top of LOOP...[UNTL] statment or LOOP...[EVER]\nLOOPs may be nested, but MUST NOT be jumped out of'
      scope: keyword.control.caos

    - match: '(\b([Ll][Tt][Cc][Yy])\b)'
      comment: 'Set the latency for the creatures given involuntary action (only relevant to involuntary actions).\nPrevent this action from repeating for an amount of time defined by min max. Delay is a random\namount of ticks between min*4 and max*4.\naction int\nmin int\nmax int'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Mm][Aa][Tt][Ee])\b)'
      comment: 'Only relevant to male creatures – pass on waiting sperm to _IT_ (if _IT_ is female and the same\ngenus). Female will conceive if she is in the right condition – fertile and receptive.'
      scope: entity.name.function.caos

    - match: '(\b([Mm][Cc][Rr][Tt])\b)'
      comment: 'Move object to absolute location and redraw,\nthis is different from [MVTO] in that the object has\nit’s limits removed before moving.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '([Mm][Ee][Ss][Gg])\s*([Ss][Hh][Oo][Uu])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Shout message to all creatures that can hear the object'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Mm][Ee][Ss][Gg])\s*([Ss][Ii][Gg][Nn])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send message to all creatures that can see the object'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Mm][Ee][Ss][Gg])\s*([Tt][Aa][Cc][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send message to all creatures that are touching the object'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Mm][Ee][Ss][Gg])\s*([Ww][Rr][Ii][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Write/Send message to a specific object. Object is a pointer to an object ([TARG], [OWNR], [FROM]\nor [NORN])'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '([Mm][Ee][Ss][Gg])\s*([Ww][Rr][Tt][+])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Write message {message} with parameters {p1} and {p2} to object; to be handled in {delay} clock\nticks. If {delay} = 0 the message will be handled immediately. {message} must be in the range\n256..65535. (Messages 0..12 are currently used for ACTIVATE1 etc. events).\nThe message that is sent\nwill trigger event m on the targ object.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue]

    - match: '(\b([Mm][Oo][Dd][Vv])\b)'
      comment: '{value1} = {value1} % {value2}'
      scope: entity.name.function.caos
      push: [rvalue,lvalue]

    - match: '(\b([Mm][Uu][Ll][Vv])\b)'
      comment: '{value1} = {value1} * {value2}'
      scope: entity.name.function.caos
      push: [rvalue,lvalue]

    - match: '(\b([Mm][Vv][Bb][Yy])\b)'
      comment: 'Move object by relative amount and redraw.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Mm][Vv][Tt][Oo])\b)'
      comment: 'Move object to absolute location and redraw\nNote: Should not be used on a creature that has had its\nlimit set.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Nn][Ee][Gg][Vv])\b)'
      comment: '{value1} = -{value1}'
      scope: entity.name.function.caos
      push: [lvalue]

    - match: '([Nn][Ee][Ww][:])\s*([Bb][Bb][Tt][Xx])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Create a new text part for the current compound bubble object.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '([Nn][Ee][Ww][:])\s*([Bb][Kk][Bb][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Create a blackboard object – blackboard objects are the only ones that can use the [BBD:]\ncommands designed to teach words and concepts.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,token]

    - match: '([Nn][Ee][Ww][:])\s*([Cc][Bb][Tt][Nn])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Create a call button object.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,token]

    - match: '([Nn][Ee][Ww][:])\s*([Cc][Bb][Uu][Bb])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Create a new Compound bubble object, this is a specialisation of a compound object that has text\nboxes capable of displaying text from the in-game string table – specified by stringID.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,token]

    - match: '([Nn][Ee][Ww][:])\s*([Cc][Oo][Mm][Pp])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Create a Compound Object. By default it has no parts, these must be set up after creation –\nCompound Objects need at least one part.\nCompound Objects are different from Simple Objects in that\nthey can not be picked up – even if ATTR is set to allow it.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,token]

    - match: '([Nn][Ee][Ww][:])\s*([Cc][Rr][Ee][Aa])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Create a new-born creature.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '([Nn][Ee][Ww][:])\s*([Gg][Ee][Nn][Ee])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Creates a new genome file from mum’s and dad’s (or just mum if dad=0) genomes, and stores the\nnew genome''s moniker in the variable child.\nUse [TOKN] to convert text moniker to int\n@example:\n#{NEW: GENE TOKN ADAM TOKN EVE_ OV00}'
      scope: entity.name.function.caos
      push: [lvalue,rvalue,rvalue]

    - match: '([Nn][Ee][Ww][:])\s*([Ll][Ii][Ff][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Create a lift object – lift objects work in conjunction with call buttons to move between\nfloors.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,token]

    - match: '([Nn][Ee][Ww][:])\s*([Pp][Aa][Rr][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Add apart to the current Compound Object. Should be used immediately after creating a Compound\nObject to add one or more parts to it.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue]

    - match: '([Nn][Ee][Ww][:])\s*([Rr][Aa][Ii][Nn])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Creates a new rain cloud object, these are like Simple Objects but have a weather effect\nunderneath.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,token]

    - match: '([Nn][Ee][Ww][:])\s*([Ss][Cc][Ee][Nn])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Creates a scenery object – scenery objects do not need to have a unique classifier.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,token]

    - match: '([Nn][Ee][Ww][:])\s*([Ss][Ii][Mm][Pp])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Creates a Simple Object. By default Simple Objects have no attributes or behavior defined, these\nmust be set up after creation.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,token]

    - match: '([Nn][Ee][Ww][:])\s*([Vv][Hh][Cc][Ll])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Create a vehicle object.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,token]

    - match: '(\b([Nn][Ee][Xx][Tt])\b)'
      comment: 'part of [ENUM]...[NEXT]'
      scope: keyword.control.caos

    - match: '(\b([Nn][Ss][Cc][Nn])\b)'
      comment: 'Ends [ESCN] enum loop'
      scope: keyword.control.caos

    - match: '(\b([Oo][Rr][Rr][Vv])\b)'
      comment: 'sets the {var} to the {var} bit-wise or with {value}\n{var} = {var} | {value}'
      scope: entity.name.function.caos
      push: [rvalue,lvalue]

    - match: '(\b([Oo][Vv][Ee][Rr])\b)'
      comment: 'Wait until [TARG] objects animation is over.\nNote: [ANIM]s ending in R will never end, hence\ncausing a lock out'
      scope: entity.name.function.caos

    - match: '(\b([Pp][Aa][Rr][Tt])\b)'
      comment: 'Sets the working part number. Future command such as POSE and ANIM, amongst others, act on that\npart of a compound agent.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Pp][Ll][Dd][Ss])\b)'
      comment: 'Preload the named sound into the sound cache if TARG is visible or just off screen.\nfilename  value'
      scope: entity.name.function.caos
      push: [token]

    - match: '(\b([Pp][Oo][Ii][Nn])\b)'
      comment: 'Point to [_IT_]. As for [TOUC] but creature reaches out to object with head facing the camera.'
      scope: entity.name.function.caos

    - match: '(\b([Pp][Oo][Ss][Ee])\b)'
      comment: 'Sets the object (or parts) pose = i.e. which image number it is currently using'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Pp][Rr][Ll][Dd])\b)'
      comment: 'Pre-load image cache with these poses for smoother animation later\nNote: Not applicable on a\ncreature'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Rr][Aa][Ii][Nn])\b)'
      comment: 'Set a property of the weather effect of a [RAIN] object.\nProperties:\n\t0=x position, relative to\nobject\n\t1=y position, relative to object\n\t2=width\n\t3=height\n\t4=angle of effect (updated by\nwind)\n\t5=speed number of pixels moved per update\n\t6=mode  (0=stopped, 1=running, 2=start!,\n3=stop!)\n\t7=rain image number (0-11)'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Rr][Cc][Ll][Rr])\b)'
      comment: 'Room CleaR music. Resets the music track of all rooms to “no change”.'
      scope: entity.name.function.caos

    - match: '(\b([Rr][Ee][Pp][Ee])\b)'
      comment: 'End [REPS] loop'
      scope: keyword.control.caos

    - match: '(\b([Rr][Ee][Pp][Ss])\b)'
      comment: 'Repeat the following code # times, up to next [REPE] (# >= 1)\nNOTE: [REPS]/[REPE] may be nested,\nbut loops must NOT be jumped out of'
      scope: keyword.control.caos
      push: [rvalue]

    - match: '(\b([Rr][Ee][Tt][Nn])\b)'
      comment: 'returns from a [GSUB]'
      scope: keyword.control.caos

    - match: '(\b([Rr][Mm][Ee][Vv])\b)'
      comment: 'Removes an event label from the event bar. The value for targ works the same as\nEVNT.\nSCOR  int>>\nReturns chronicle information concerning a particular game item. The values for\nitem are:\n0 – Generation 1 eggs used\n1 – Number of natural eggs laid\n2 – Number of deaths\n3\n– Number of creatures imported\n4 – Number of creatures exported\n5 – Number of creatures alive'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Rr][Mm][Ss][Cc])\b)'
      comment: 'Room MuSiC. Specify music track associated with the room at this x y co-ordinate.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Rr][Nn][Dd][Vv])\b)'
      comment: 'Set a variable to a random number between {min} and {max}.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,lvalue]

    - match: '(\b([Rr][Oo][Oo][Mm])\b)'
      comment: 'Room Property values'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue]

    - match: '(\b([Rr][Tt][Aa][Rr])\b)'
      comment: 'Randomly selects a member from the given classification and sets it as [TARG]. Null if no members\nexist'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '([Ss][Aa][Yy][#])'
      comment: 'Speak word number in a speech bubble, and send that word as a signal message to creatures in\nearshot'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Ss][Aa][Yy][$])'
      comment: 'Speak the given string in a speech bubble – no signal sent'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Ss][Aa][Yy][Nn])\b)'
      comment: 'Speak your most pressing need'
      scope: entity.name.function.caos

    - match: '(\b([Ss][Cc][Rr][Pp])\b)'
      comment: 'Indicates that the rest of this macro is to be installed into the scriptorium, making it available\nas a new/replacement event script for a given type of object.\nfamily genus species – indicate the\nowner of this script, if values of 0 are used for any of these then the script will be installed as\na default script for a wide range of objects. i.e. if species is 0 then the script will apply to all\nwho share the same family and genus. event – indicates the event that will invoke this script, see\nthe reference section for a list of event numbers.'
      scope: keyword.control.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '(\b([Ss][Cc][Rr][Xx])\b)'
      comment: 'Removes the script matching this description from the scriptorium.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '(\b([Ss][Ee][Tt][Vv])\b)'
      comment: 'Set a variable to have the value {value}.'
      scope: entity.name.function.caos
      push: [rvalue,lvalue]

    - match: '(\b([Ss][Ll][Ii][Mm])\b)'
      comment: 'Set the limits of the target object.\nThis is needed when an object is first put into the world (or\nafter a MCRT command) because it appears in a state where it’s boundary limits are not defined.'
      scope: entity.name.function.caos

    - match: '(\b([Ss][Ll][Oo][Ww])\b)'
      comment: 'Negates previous [INST] command, returns control flow to normal execution.'
      scope: entity.name.function.caos

    - match: '(\b([Ss][Nn][Dd][Cc])\b)'
      comment: 'Play controlled sound effect if TARG is visible on screen. A controlled sound will follow TARG\naround as it moves, for the duration of the effect.'
      scope: entity.name.function.caos
      push: [token]

    - match: '(\b([Ss][Nn][Dd][Ee])\b)'
      comment: 'Play sound effect if TARG is visible on screen.'
      scope: entity.name.function.caos
      push: [token]

    - match: '(\b([Ss][Nn][Dd][Ff])\b)'
      comment: 'Set the sound status'
      scope: entity.name.function.caos
      push: [token]

    - match: '(\b([Ss][Nn][Dd][Ll])\b)'
      comment: 'Start a controlled sound loop if TARG is visible on screen'
      scope: entity.name.function.caos
      push: [token]

    - match: '(\b([Ss][Nn][Dd][Qq])\b)'
      comment: 'Play sound effect after a short delay if [TARG] is visible on screen.'
      scope: entity.name.function.caos
      push: [rvalue,token]

    - match: '(\b([Ss][Nn][Dd][Vv])\b)'
      comment: 'Play sound if [TARG] object is visible on screen \nChange volume according to distance from\nscreen\nNow replaced by [SNDE] (sound effect) which doesn''t require surrounding brackets (ie.\n[]''s)'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Ss][Nn][Ee][Zz])\b)'
      comment: 'Creature sneezes – this will infect any nearby creatures or environment with any live bacteria it\nhas in it.'
      scope: entity.name.function.caos

    - match: '(\b([Ss][Pp][Aa][Ss])\b)'
      comment: 'Loads a named {creature} into the named {vehicle}'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Ss][Pp][Oo][Tt])\b)'
      comment: 'Set up a compound object hotspot for users/creatures to click on. These commands (along with\n[KNOB]) allows different parts of an object to produce different events when clicked on.\nspot# =\n(0-5) a number to identify this particular spot\nleft/top/right/bottom = Co-ordinates of hotspot\nrelative to part 0 of the object.\nNOTE: Set {left} {top} {right} {bottom} to –1 –1 –1 –1 to\nremove/blank a hotspot\n\t@example: #{spot 0 -1 -1 -1 -1} - will remove hot spot 0'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue]

    - match: '(\b([Ss][Ss][Ff][Cc])\b)'
      comment: 'Set SurFaCe points in a room.\nSecond parameter is the number of points to set, and controls how\nmany arguments this command takes.\nEvery floor point requires 2 arguments, the X and Y\nExample: #{\ndde: getb ssfc 0 1 2 2 }  Gives us a room with one floor point at (2,2)\nExample: #{ dde: getb ssfc 0\n2 1 1 3 2} Gives us a room with two floor points [ (1,1),(3,2) ]'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Ss][Tt][Aa][Rr])\b)'
      comment: 'Pick a random object that can be seen by [OWNR] object matching the given family genus species'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '([Ss][Tt][Ii][Mm])\s*([Ss][Hh][Oo][Uu])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Shout the list of stimulus_items to all within earshot\nsignificance – amount to nudge the Source\nlobe neurone by, this decides the significance of the object. input – which neurone in the General\nSense lobe to fire (or 255 for none)\nList 4 chemicals to emit and the amounts. If less than 4\nchemicals are required then the remaining values should be set to 0'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue]

    - match: '([Ss][Tt][Ii][Mm])\s*([Ss][Ii][Gg][Nn])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send a stimulus to all creatures who can see [OWNR].\nsignificance – amount to nudge the Source\nlobe neurone by, this decides the significance of the object. input – which neurone in the General\nSense lobe to fire (or 255 for none)\nList 4 chemicals to emit and the amounts. If less than 4\nchemicals are required then the remaining values should be set to 0'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue]

    - match: '([Ss][Tt][Ii][Mm])\s*([Tt][Aa][Cc][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send a stimulus to all creatures who are touching [OWNR].\nsignificance – amount to nudge the\nSource lobe neurone by, this decides the significance of the object. input – which neurone in the\nGeneral Sense lobe to fire (or 255 for none)\nList 4 chemicals to emit and the amounts. If less than\n4 chemicals are required then the remaining values should be set to 0'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue]

    - match: '([Ss][Tt][Ii][Mm])\s*([Ww][Rr][Ii][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send stimulus to a specific creature.\nSignificance – amount to nudge the Source lobe neurone by,\nthis decides the significance of the object. \nInput – which neurone in the General Sense lobe to\nfire (or 255 for none)\nList 4 chemicals to emit and the amounts.\nIf less than 4 chemicals are\nrequired then the remaining values should be set to 0'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue,rvalue]

    - match: '([Ss][Tt][Mm][#])\s*([Ss][Hh][Oo][Uu])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Shout {stimulus} to all creatures within earshot of [OWNR] object'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Ss][Tt][Mm][#])\s*([Ss][Ii][Gg][Nn])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send {stimulus} to all creatures that can see [OWNR] object'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Ss][Tt][Mm][#])\s*([Tt][Aa][Cc][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send {stimulus} to all creatures that are touching [OWNR] object'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Ss][Tt][Mm][#])\s*([Ww][Rr][Ii][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Send {stimulus} to the specified {object}'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Ss][Tt][Oo][Pp])\b)'
      comment: 'Stop execution (eg. following error, or before subroutine definitions start)'
      scope: entity.name.function.caos

    - match: '(\b([Ss][Tt][Pp][Cc])\b)'
      comment: 'Stop any controlled sounds currently playing with this [TARG].'
      scope: entity.name.function.caos

    - match: '(\b([Ss][Uu][Bb][Rr])\b)'
      comment: 'Identifies a Subroutine. ''label'' is a 4-char unique label name [GSUB] takes us to point AFTER\n[SUBR] labl, so only reach here through normal code flow.\nTherefore, treat [SUBR] the same as [STOP]\n([STOP] is therefore not needed before the start of any subroutines).'
      scope: keyword.control.caos
      push: [token]

    - match: '(\b([Ss][Uu][Bb][Vv])\b)'
      comment: '{value1} = {value1} - {value2}'
      scope: entity.name.function.caos
      push: [rvalue,lvalue]

    - match: '([Ss][Yy][Ss][:])\s*([Aa][Bb][Rr][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Abandons changes to world and closes the game window'
      scope: entity.name.function.caos

    - match: '([Ss][Yy][Ss][:])\s*([Cc][Aa][Mm][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'moves camera to point at current [TARG]'
      scope: entity.name.function.caos

    - match: '([Ss][Yy][Ss][:])\s*([Cc][Mm][Nn][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Issue an ID_XXX command message to the application. This allows macros to activate ANY menu\ncommand. Note that command will get executed LATER - fn doesn''t wait before returning!\nid# int the\ndecimal ID_XXX value - look these up in the resource file & list them for users'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Ss][Yy][Ss][:])\s*([Cc][Mm][Rr][Aa])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Position camera with this co-ordinate as the top-left'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '([Ss][Yy][Ss][:])\s*([Cc][Mm][Rr][Pp])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'CaMeRa Pan. Similar to the macro [SYS: CMRA]\nMoves the camera to the specified x and y position.\nIf\nthat location is within the window view then the camera smooth scrolls to this position, otherwise\nthe camera jumps to that location.\nThis command does not effect the users choice of scrolling mode.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '([Ss][Yy][Ss][:])\s*([Cc][Oo][Nn][Vv])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'CONVert sprite file. Command converts a given sprite file (located in the images directory) to the\ncurrent system image format. If the file is already in the correct format it is not modified.'
      scope: entity.name.function.caos
      push: [rvalue,token]

    - match: '([Ss][Yy][Ss][:])\s*([Dd][Mm][Aa][Pp])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Draw map.\n1 -> draw room box, floor and vehicle cabins over backdrop. 0 -> do not draw room data.'
      scope: entity.name.function.caos

    - match: '([Ss][Yy][Ss][:])\s*([Ee][Dd][Ii][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Draw a rectangle on the game window with the corners given by the co-ordinates left top right\nbottom.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '([Ss][Yy][Ss][:])\s*([Gg][Rr][Nn][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'set ground level at position x (worldx/GROUNDW) (see [GND#] and [GNDW] macros for establishing\nuseful constants)'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '([Ss][Yy][Ss][:])\s*([Qq][Uu][Ii][Tt])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Saves the world and closes the game window'
      scope: entity.name.function.caos

    - match: '([Ss][Yy][Ss][:])\s*([Ww][Pp][Oo][Ss])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'attempt to position vivarium frame window to this size (in pixels)\nActual size will be limited to\nmaximum view size or size of screen, if necessary'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '([Ss][Yy][Ss][:])\s*([Ww][Rr][Ll][Dd])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Saves the current world and opens the named one'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '([Ss][Yy][Ss][:])\s*([Ww][Tt][Oo][Pp])'
      captures:
        1: entity.name.function.caos.prefix
        2: entity.name.function.caos
      comment: 'Set the world window to be the foreground window.'
      scope: entity.name.function.caos

    - match: '(\b([Tt][Aa][Rr][Gg])\b)'
      comment: 'Sets the current object of script focus.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Tt][Ee][Cc][Oo])\b)'
      comment: 'Toggle Ecosystem on and off.\nSwitches the room system update mechanism on or off.\nDefault: on.'
      scope: entity.name.function.caos

    - match: '(\b([Tt][Ee][Ll][Ee])\b)'
      comment: 'Teleport the vehicles occupants to the location x y and move the camera too.'
      scope: entity.name.function.caos
      push: [rvalue,rvalue]

    - match: '(\b([Tt][Ii][Cc][Kk])\b)'
      comment: 'Sets the object timer script tick rate. Set TICK to 0 to stop the timer script executing.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Tt][Oo][Oo][Ll])\b)'
      comment: 'Issued by a DDE tool app to register itself with the toolbar'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue,rvalue]

    - match: '(\b([Tt][Oo][Uu][Cc])\b)'
      comment: 'Reach out and touch [_IT_], normally preceded with an [APPR] macro.\nContinue with next instruction\nwhen you have successfully touched [_IT_].\nIf total failure (object gone away) then present action\nschema is suppressed.'
      scope: entity.name.function.caos

    - match: '(\b([Tt][Rr][Ii][Gg])\b)'
      comment: 'Fire the neurone that is at the lobe and cell numbers specified – amount is the signal strength\n(0-255)'
      scope: entity.name.function.caos
      push: [rvalue,rvalue,rvalue]

    - match: '(\b([Uu][Nn][Ll][Kk])\b)'
      comment: 'Enables the execution of other event scripts on this object. This should be paired with command\nLOCK.'
      scope: entity.name.function.caos

    - match: '(\b([Uu][Nn][Tt][Ll])\b)'
      comment: 'Part of a LOOP-UNTL statement. Repeat loop unless condition is true.\nValid relations are:\nEQ –\nEqual\nNE – Not equal\nGT – Greater than\nLT – Less than\nGE – Greater than or equal to \nLE –\nLess than or equal to \nBT – Bit-wise AND function \nBF – Bit-wise NAND function'
      scope: keyword.control.caos
      push: [rvalue, eqOp, rvalue]

    - match: '(\b([Vv][Rr][Ss][Nn])\b)'
      comment: 'Only run this script if the Creatures Build ID is equivalent or higher than number.'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Ww][Aa][Ii][Tt])\b)'
      comment: 'Wait for the specified number of game ticks before continuing with next instruction. A tick is\nroughly 1/10 sec'
      scope: entity.name.function.caos
      push: [rvalue]

    - match: '(\b([Ww][Aa][Ll][Kk])\b)'
      comment: 'Walk indefinitely. Chose a walking gait according to chemo-receptors, then start walking.\nIf\nextraspective you’ll continuously walk towards [_IT_], but the command is primarily for\nintrospective walking.'
      scope: entity.name.function.caos

    - match: '\b([Aa][Nn][Dd]|[Oo][Rr])\b'
      scope: keyword.operator.word
      push: [rvalue, eqOp, rvalue]
      comment: Joins two equality statements
    - match: '\s+'
      scope: text

    - match: '\b([^ ]+)\b'
      scope: invalid.illegal.caos
      pop: true


  lvalue:
    - match: '\s*\*.*$'
      scope: comment.line.caos
    - match: '([_][Pp][1][_])'
      comment: 'First macro script parameters specified in command [MESG WRT+].'
      scope: variable.language.caos.lvalue
      pop: true

    - match: '([_][Pp][2][_])'
      comment: 'Second macro script parameters specified in command [MESG WRT+]'
      scope: variable.language.caos.lvalue
      pop: true

    - match: '(\b([Aa][Cc][Cc][Gg])\b)'
      comment: 'Sets/returns the objects Acceleration due to Gravity. This equates to density and air resistance in\nreal-world physics. Value is in pixels per tick per tick.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Aa][Cc][Tt][Vv])\b)'
      comment: 'Returns objects Active status. See reference section for values.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Aa][Ee][Rr][Oo])\b)'
      comment: 'Sets/returns the objects Aerodynamics. % of x and y velocity lost due to air resistance every\ntick.\n0% infinite movement!'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Aa][Tt][Tt][Rr])\b)'
      comment: 'Sets/returns an objects Attributes'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Bb][Aa][Bb][Yy])\b)'
      comment: 'Moniker of child genome if creature is pregnant.\nSet to 0 to finish pregnancy or a moniker to make\npregnant.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Cc][Ll][Aa][Ss])\b)'
      comment: 'This sets the classifier of the current TARG. The classifier is its unique family/genus/species id.\nThis number is calculated from the hexadecimal version of the long form classifier (see class\ncalculator below)'
      scope: variable.language.caos.lvalue
      pop: true

    - match: '([Cc][Ll][Ss][2])'
      comment: 'Used when creating an object, this is how you assign it a unique classifier'
      scope: variable.language.caos.lvalue
      set: [rvalue,rvalue]

    - match: '(\b([Dd][Oo][Oo][Rr])\b)'
      comment: 'Gets/sets the door open value between the given rooms.'
      set: [rvalue,rvalue]
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Ff][Rr][Zz][Nn])\b)'
      comment: 'Sets/returns whether an object is Frozen. Can be 1 or 0.\nWhen an object is frozen it no longer\nreceives updates and, in the case of creatures, external stimuli.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Gg][Aa][Mm][Ee])\b)'
      comment: 'Game flow state. \nSets or queries game flow state.\nCategory: 0 = Applet custom condition,\nVariable:\nApplet slot number.\nCategory: 1 = Applet advanced option,\nVariable: Applet slot number. 5=Science\nKit, 6=Neuroscience Kit.\nCategory: 2 = Game feature enable.\nVariable: 0 = Select Ettins/ Grendels, 1\n= Infinite scroll'
      scope: variable.language.caos.lvalue
      set: [rvalue,rvalue]

    - match: '(\b([Gg][Rr][Aa][Vv])\b)'
      comment: 'When an object is falling [GRAV] has a value of 1, set it to 1 to make it fall.\nGravity. 1 = on, 0\n= off.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Hh][Ss][Rr][Cc])\b)'
      comment: 'Sets/returns the Heat source in room at targ'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Ii][Nn][Tt][Rr])\b)'
      comment: 'Sets/returns the Inorganic nutrients at [targ]'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Ll][Aa][Cc][Bb])\b)'
      comment: 'Align Lift cabin with room floor.\nIf this value is set to non- zero the lift will stop at a\nposition where the bottom of its cabin is aligned with the room floor.\nThe default behaviour is to\nalign the bottom of the lift with the floor.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Ll][Ii][Tt][Ee])\b)'
      comment: 'Sets/returns the room light level at [targ]'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Ll][Ss][Rr][Cc])\b)'
      comment: 'Sets/returns the Light source in room at targ.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Mm][Oo][Vv][Ss])\b)'
      comment: 'Gets/Returns the Movement Status of an object. See reference section for values.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Mm][Uu][Ss][Cc])\b)'
      comment: '\t0=volume (0-255)\n\t1=mood (0-255)\n\t2=threat (0-255)\n\t3=Automatically update music'
      set: [rvalue]
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Nn][Oo][Rr][Nn])\b)'
      comment: 'Returns the creature currently selected by the user.'
      pop: true
      scope: variable.language.member.caos.lvalue.agent

    - match: '(\b([Oo][Bb][Jj][Pp])\b)'
      comment: 'Specific pointer to store ID of an object for later retrieval.\nLegacy command from Creatures 1. Can\nnow use normal variables instead.'
      pop: true
      scope: variable.language.member.caos.lvalue.agent

    - match: '(\b([Oo][Bb][Vv][0-9])\b)'
      comment: 'OBV0 to OBV2 are variables specific to an agent. They are read from [TARG] (the target\nagent)\n@range(0 to 2)'
      scope: variable.other.member.caos
      pop: true

    - match: '(\b([Oo][Nn][Tt][Rr])\b)'
      comment: 'Sets/returns the room''s organic nutrients at [targ]'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Oo][Vv][0-9][0-9])\b)'
      comment: 'OV00 to OV99 are variables specific to an agent. They are read from [TARG], the target agent. You\ncan also access these same variables via [OWNR] using [MVxx].\n@range(0 to 99)'
      scope: variable.other.member.caos
      pop: true

    - match: '(\b([Pp][Aa][Uu][Ss])\b)'
      comment: 'PAUSe game. 0=normal, 1=pause\nNote that Creatures already calls a dispatch method for each applet\ncurrently running when the game pauses.\nGAME  <<value>>\nGAME flow state. Sets or queries game flow\nstate. Category: 0 = Applet custom condition,\nVariable: Applet slot number.\nCategory: 1 = Applet\nadvanced option,\nVariable: Applet slot number. 5 for Science Kit, 6 for Neuroscience Kit.\nCategory:\n2 = Game feature enable.\nVariable: 0 = Select Ettins/ Grendels, 1 = Infinite scroll'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Pp][Rr][Ee][Ss])\b)'
      comment: 'Sets/returns the Pressure in room at object.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Pp][Ss][Rr][Cc])\b)'
      comment: 'Sets/returns the Pressure source in room at targ'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Pp][Uu][Hh][Ll])\b)'
      comment: 'Pick Up handle. The virtual ''handle'', i.e. the point by which an object is carried. Simple\nObjects only.'
      scope: variable.language.caos.lvalue
      set: [rvalue,rvalue]

    - match: '(\b([Pp][Uu][Pp][Tt])\b)'
      comment: 'Pick Up point. This is the location of the virtual ''hand'' an object uses to hold another. Simple\nObjects only'
      scope: variable.language.caos.lvalue
      set: [rvalue,rvalue]

    - match: '(\b([Rr][Aa][Dd][Nn])\b)'
      comment: 'Sets/returns the room''s radiation at [targ]'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Rr][Ee][Ss][Tt])\b)'
      comment: 'Sets/returns the objects Restitution. % of y velocity lost after collision. I.e. Bounciness.\n0%\ninfinite bounce!'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Rr][Mm][Nn][Dd])\b)'
      comment: 'Room Neighbour door Door-open value.'
      set: [rvalue,rvalue,rvalue]
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Rr][Mm][Nn][Rr])\b)'
      comment: 'Room door destination room id'
      set: [rvalue,rvalue,rvalue]
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Rr][Nn][Gg][Ee])\b)'
      comment: 'Sets/returns the range an object can see.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Rr][Ss][Rr][Cc])\b)'
      comment: 'Sets/returns the Radiation source in room at targ.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Rr][Tt][Yy][Pp])\b)'
      comment: 'Room Type. Sets/returns the type of the room at the centre point of Targ.\nReturns:\n\t(-1) -\nInvalid.\n\t0 - Under the Albian surface.\n\t1 - On the Albian surface.\n\t2 - In the sea.\n\t3 - In the\nsky.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Ss][Ii][Zz][Ee])\b)'
      comment: 'Sets/returns the minimum door value through which an object will pass. Door values are set up using\na Room Editor.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Tt][Ee][Mm][Pp])\b)'
      comment: 'Sets/returns the room temperature at [targ]'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Tt][Hh][Rr][Tt])\b)'
      comment: 'Sets/returns the THReaT, how dangerous an object is to a creature.\nThis attribute is used only for\nthe in-game music system. 255 = high threat; 0 = no threat.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Vv][Aa][Rr][0-9])\b)'
      comment: 'VAR0 to VAR9 are local variables, whose values are lost when the current script ends.\n@range(0 to\n9)'
      scope: variable.other.member.caos
      pop: true

    - match: '(\b([Vv][Aa][0-9][0-9])\b)'
      comment: 'VA00 to VA99 are local variables, whose values are lost when the current script ends.\n@range(0 to\n99)'
      scope: variable.other.member.caos
      pop: true

    - match: '(\b([Vv][Ee][Ll][Xx])\b)'
      comment: 'Sets/returns the object''s velocity in X direction.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Vv][Ee][Ll][Yy])\b)'
      comment: 'Sets/returns the object''s velocity in Y direction.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Ww][Ii][Nn][Hh])\b)'
      comment: 'Max allowed view window height (WORLD coords)'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Ww][Ii][Nn][Ww])\b)'
      comment: 'Max allowed view window width (WORLD coords)'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Xx][Vv][Ee][Cc])\b)'
      comment: 'Sets/returns the vehicles x-movement vector in 1/256th of a pixel.\nThis command is a legacy from\nCreatures 1 – [VELX] will work just as good.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer

    - match: '(\b([Yy][Vv][Ee][Cc])\b)'
      comment: 'Sets/returns the vehicles y-movement vector in 1/256th of a pixel.\nThis command is a legacy from\nCreatures 1 – [VELY] will work just as good.'
      pop: true
      scope: variable.language.member.caos.lvalue.integer
    - match: '\s+'
      scope: text

    - match: '\b([^ ]+)\b'
      scope: invalid.illegal.caos
      pop: true


  rvalue:
    - match: '\s*\*.*$'
      scope: comment.line.caos

    # Strings begin and end with quotes, and use backslashes as an escape
    # character
    - match: '"'
      scope: punctuation.definition.string.begin.caos
      set: double_quoted_string

    - match: ''''
      scope: punctuation.definition.character.begin.caos
      set: char

    - match: '(\[)([^\]]*)(\])'
      scope: string.quoted.other.c1.caos
      pop: true

     # Numbers
    - match: '[-+]?[0-9]*\.[0-9]+'
      scope: constant.numeric.float.caos
      pop: true

    - match: '\b[-+]?[0-9]+\b'
      scope: constant.numeric.integer.caos
      pop: true

    - match: '%[01]+'
      scope: constant.numeric.integer.binary.caos
      pop: true

    - match: '\s+'
      scope: text

    - match: ','
      scope: punctuation.terminator


    - match: '([_][Ii][Tt][_])'
      comment: 'Object that [OWNR] creature was attending to when the macro was started.\nNote: Only [OWNR]’s IT\ncan be determined, not [TARG]’s.'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '([_][Pp][1][_])'
      comment: 'First macro script parameters specified in command [MESG WRT+].'
      scope: variable.language.caos.lvalue
      pop: true

    - match: '([_][Pp][2][_])'
      comment: 'Second macro script parameters specified in command [MESG WRT+]'
      scope: variable.language.caos.lvalue
      pop: true

    - match: '(\b([Aa][Cc][Cc][Gg])\b)'
      comment: 'Sets/returns the objects Acceleration due to Gravity. This equates to density and air resistance in\nreal-world physics. Value is in pixels per tick per tick.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Aa][Cc][Tt][Vv])\b)'
      comment: 'Returns objects Active status. See reference section for values.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Aa][Ee][Rr][Oo])\b)'
      comment: 'Sets/returns the objects Aerodynamics. % of x and y velocity lost due to air resistance every\ntick.\n0% infinite movement!'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Aa][Ss][Ll][Pp])\b)'
      comment: 'Returns whether a creature is asleep. When asleep the eyes close and the creature becomes\ninsensible to some stimuli. A change of action automatically wakes creature up again. 0=awake,\n1=asleep'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Aa][Tt][Tt][Nn])\b)'
      comment: 'IT - object that [OWNR] creature is attending to. May be null and may change during script\nexecution.\nNOTE: only [OWNR]''s IT can be determined, not [TARG]''s'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Aa][Tt][Tt][Rr])\b)'
      comment: 'Sets/returns an objects Attributes'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Bb][Aa][Bb][Yy])\b)'
      comment: 'Moniker of child genome if creature is pregnant.\nSet to 0 to finish pregnancy or a moniker to make\npregnant.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Bb][Uu][Mm][Pp])\b)'
      comment: 'Returns a vehicle’s collision data. This is a legacy command left in for completeness. To utilise\nthis a vehicle must move use XVEC and YVEC (rather than VELX and VELY) and have ATTR set up to\nrespond to boundaries.\nThe values returned are from a bit-field where:\n\t1 = hit left\n\t2 = hit\nright\n\t4 = hit top\n\t8 = hit bottom\nSo, for example: a value of 1 corresponds to having hit a wall\nto the left; a value of 4 corresponds to having hit a ceiling; a value of 5 corresponds to having\nhit a ceiling and a wall to the left (sum of ceiling=4, left=1)'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Cc][Aa][Gg][Ee])\b)'
      comment: 'Returns the creatures stage of life.\n0 – embryo\n1 – baby\n2 – child\n3 – adolescent\n4 –\nyouth\n5 – adult\n6 – old\n7 – senile'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Cc][Aa][Mm][Nn])\b)'
      comment: 'Creature age in minutes'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Cc][Aa][Rr][Rr])\b)'
      comment: 'Object that’s carrying [OWNR].\nFor carrier of [TARG] see [TCAR]'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Cc][Hh][Ee][Mm])\b)'
      comment: 'Returns the concentration of a chemical in a creatures bloodstream or adds the amount given.'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Cc][Ll][Aa][Ss])\b)'
      comment: 'This sets the classifier of the current TARG. The classifier is its unique family/genus/species id.\nThis number is calculated from the hexadecimal version of the long form classifier (see class\ncalculator below)'
      scope: variable.language.caos.lvalue
      pop: true

    - match: '(\b([Cc][Mm][Rr][Xx])\b)'
      comment: 'CaMeRa centre X co-ordinate.\nThe centre x co-ordinate of the camera in world co-ordinates.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Cc][Mm][Rr][Yy])\b)'
      comment: 'CaMeRa centre Y co-ordinate.\nThe centre y co-ordinate of the camera in world co-ordinates.\nSYS:\nWPOS\nAttempt to position the game window,\nwith the top left corner being at (x,y) of the screen and\nthe window having dimensions width and height.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Cc][Rr][Ee][Aa])\b)'
      comment: 'Returns the creature with the specified moniker'
      set: [rvalue]
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Dd][Ee][Aa][Dd])\b)'
      comment: 'Creature is dead'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Dd][Ii][Rr][Nn])\b)'
      comment: 'Returns the direction the creature is facing.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Dd][Oo][Oo][Rr])\b)'
      comment: 'Gets/sets the door open value between the given rooms.'
      set: [rvalue,rvalue,rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Dd][Rr][Ii][Vv])\b)'
      comment: 'Returns the state of the creatures Drive number'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '([Dd][Rr][Vv][!])'
      comment: 'Returns the id of the highest drive for the target creature.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ee][Dd][Ii][Tt])\b)'
      comment: 'The contents of the edit buffer, set by using the [EDIT] command or shift clicking an object.'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Ee][Gg][Gg][Ll])\b)'
      comment: 'Egg Limit. Returns the number of norns above which eggs should stop hatching'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ee][Xx][Ee][Cc])\b)'
      comment: 'object who EXECuted the tool who owns this\nreturn (int)Exec; dde macro. NOTE: only valid for\nDDE\ntools who *know* that they were executed by an object'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Ff][Ll][Oo][Rr])\b)'
      comment: 'Returns the y co-ordinate of the floor at the centre x position of [Targ].'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ff][Mm][Ll][Yy])\b)'
      comment: 'Returns the object’s family'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ff][Rr][Oo][Mm])\b)'
      comment: 'Object who caused event leading to execution of this script.'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Ff][Rr][Zz][Nn])\b)'
      comment: 'Sets/returns whether an object is Frozen. Can be 1 or 0.\nWhen an object is frozen it no longer\nreceives updates and, in the case of creatures, external stimuli.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Gg][Aa][Mm][Ee])\b)'
      comment: 'Game flow state. \nSets or queries game flow state.\nCategory: 0 = Applet custom condition,\nVariable:\nApplet slot number.\nCategory: 1 = Applet advanced option,\nVariable: Applet slot number. 5=Science\nKit, 6=Neuroscience Kit.\nCategory: 2 = Game feature enable.\nVariable: 0 = Select Ettins/ Grendels, 1\n= Infinite scroll'
      scope: variable.language.caos.lvalue
      set: [rvalue,rvalue]

    - match: '(\b([Gg][Ee][Nn][Dd])\b)'
      comment: 'Returns [OWNR] Creature''s gender. Appears to return 1 on non-creature [OWNR] agents'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '([Gg][Nn][Dd][#])'
      comment: 'Number of ground level data on map'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Gg][Nn][Dd][Ww])\b)'
      comment: 'Number of pixels per ground datum'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Gg][Nn][Uu][Ss])\b)'
      comment: 'Returns the object''s genus'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Gg][Rr][Aa][Vv])\b)'
      comment: 'When an object is falling [GRAV] has a value of 1, set it to 1 to make it fall.\nGravity. 1 = on, 0\n= off.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Gg][Rr][Nn][Dd])\b)'
      comment: 'Returns the ground level of the first surface room at x position in the world.\nGround, in this\ncase, is just the bottom of the first surface room and doesn’t take into account uneven floors or\ndoor values of adjoining rooms.'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Hh][Aa][Tt][Ll])\b)'
      comment: 'Hatchery limit. Returns the number of norns above which the hatchery should shut down.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Hh][Gg][Hh][Tt])\b)'
      comment: 'Returns objects height'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Hh][Oo][Uu][Rr])\b)'
      comment: 'Returns the number of game hours elapsed since game start.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Hh][Ss][Rr][Cc])\b)'
      comment: 'Sets/returns the Heat source in room at targ'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '([Ii][Nn][Ss][#])'
      comment: 'Returns the number of instincts the creature still has left to process. Instincts are processed in\nthe egg and during sleep.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ii][Nn][Tt][Rr])\b)'
      comment: 'Sets/returns the Inorganic nutrients at [targ]'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ii][Ss][Aa][Rr])\b)'
      comment: 'Returns whether the given room number exists, returns 1 if true 0 if false.'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ll][Aa][Cc][Bb])\b)'
      comment: 'Align Lift cabin with room floor.\nIf this value is set to non- zero the lift will stop at a\nposition where the bottom of its cabin is aligned with the room floor.\nThe default behaviour is to\nalign the bottom of the lift with the floor.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ll][Aa][Nn][Gg])\b)'
      comment: '\nPrimary LANGuage of Windows desktop. Values are (in hexadecimal) as follows:\nNeutral =\n0x00\nChinese = 0x04\nCzech = 0x05\nDanish = 0x06\nDutch = 0x13\nEnglish = 0x09\nFinnish = 0x0b\nFrench =\n0x0c\nGerman = 0x07\nGreek = 0x08\nHungarian = 0x0e\nIcelandic = 0x0F\nItalian = 0x10\nJapanese =\n0x11\nKorean = 0x12\nNorwegian = 0x14\nPolish = 0x15\nPortuguese = 0x16\nRussian = 0x19\nSerbo Croatian =\n0x1a\nSlovak = 0x1b\nSpanish = 0x0a\nSwedish = 0x1d\nTurkish = 0x1F'
      pop: true
      scope: variable.function.caos.rvalue.hexadecimal

    - match: '(\b([Ll][Cc][Uu][Ss])\b)'
      comment: 'Allows interrogation of creature loci values.\ntype - 0=receptor loci 1=emitter loci\nDetails of the\nother values are listed in the reference section. Note: organ field does not refer to the organs\ndefined in the genome.'
      set: [rvalue,rvalue,rvalue,rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ll][Ii][Mm][Bb])\b)'
      comment: 'Returns object’s Limit to the Bottom as absolute value of rooms boundary\nNote: Room boundaries\nare not the same as walls, rooms can join but still allow full passage between them.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ll][Ii][Mm][Ll])\b)'
      comment: 'Returns object’s Limit to the Left as absolute value of rooms boundary\nNote: Room boundaries are\nnot the same as walls, rooms can join but still allow full passage between them.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ll][Ii][Mm][Rr])\b)'
      comment: 'Returns object’s Limit to the Right as absolute value of rooms boundary\nNote: Room boundaries are\nnot the same as walls, rooms can join but still allow full passage between them.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ll][Ii][Mm][Tt])\b)'
      comment: 'Returns object’s Limit to the Top as absolute value of rooms boundary\nNote: Room boundaries are\nnot the same as walls, rooms can join but still allow full passage between them.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ll][Ii][Tt][Ee])\b)'
      comment: 'Sets/returns the room light level at [targ]'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '([Ll][Nn][Gg][+])'
      comment: 'Sub Language of Windows desktop. Values are in hexadecimal'
      pop: true
      scope: variable.function.caos.rvalue.string.quoted

    - match: '(\b([Ll][Ss][Rr][Cc])\b)'
      comment: 'Sets/returns the Light source in room at targ.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Mm][Ii][Nn][Ss])\b)'
      comment: 'Returns the number of game minutes elapsed since game start.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Mm][Oo][Nn][Kk])\b)'
      comment: 'Returns the moniker of the creature'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Mm][Oo][Vv][Ss])\b)'
      comment: 'Gets/Returns the Movement Status of an object. See reference section for values.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Mm][Uu][Ss][Cc])\b)'
      comment: '\t0=volume (0-255)\n\t1=mood (0-255)\n\t2=threat (0-255)\n\t3=Automatically update music'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Nn][Ee][Ii][Dd])\b)'
      comment: 'Returns an objects Neural ID – i.e. which attention lobe neurone corresponds to this object'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Nn][Oo][Rr][Nn])\b)'
      comment: 'Returns the creature currently selected by the user.'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Oo][Bb][Dd][Tt])\b)'
      comment: 'Returns the distance to any obstacle in the given direction regardless of SIZE, floor value or door\nvalues.'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Oo][Bb][Jj][Pp])\b)'
      comment: 'Specific pointer to store ID of an object for later retrieval.\nLegacy command from Creatures 1. Can\nnow use normal variables instead.'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Oo][Bb][Ss][Tt])\b)'
      comment: 'Searches the room from the centre point of TARG for a floor or room door that presents an obstacle\nto the agent assuming it is moving in the given direction.\nThe value returned is the distance to\nthis obstacle.\nThis macro command takes into consideration the SIZE of the agent, the floor value of\nthe room and appropriate door values.\nIf no obstacle is presented to the agent then a very large\nnumber is returned.'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Oo][Bb][Ss][Vv])\b)'
      comment: 'Obstacle Value. Returns the value of the door for the first obstacle in the given direction.'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Oo][Bb][Vv][0-9])\b)'
      comment: 'OBV0 to OBV2 are variables specific to an agent. They are read from [TARG] (the target\nagent)\n@range(0 to 2)'
      scope: variable.other.member.caos
      pop: true

    - match: '(\b([Oo][Nn][Tt][Rr])\b)'
      comment: 'Sets/returns the room''s organic nutrients at [targ]'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Oo][Rr][Gg][Nn])\b)'
      comment: 'Returns the number of organs in the creature'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Oo][Vv][0-9][0-9])\b)'
      comment: 'OV00 to OV99 are variables specific to an agent. They are read from [TARG], the target agent. You\ncan also access these same variables via [OWNR] using [MVxx].\n@range(0 to 99)'
      scope: variable.other.member.caos
      pop: true

    - match: '(\b([Oo][Ww][Nn][Rr])\b)'
      comment: 'default object (owner of script, or pet if [DDE])'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Pp][Aa][Uu][Ss])\b)'
      comment: 'PAUSe game. 0=normal, 1=pause\nNote that Creatures already calls a dispatch method for each applet\ncurrently running when the game pauses.\nGAME  <<value>>\nGAME flow state. Sets or queries game flow\nstate. Category: 0 = Applet custom condition,\nVariable: Applet slot number.\nCategory: 1 = Applet\nadvanced option,\nVariable: Applet slot number. 5 for Science Kit, 6 for Neuroscience Kit.\nCategory:\n2 = Game feature enable.\nVariable: 0 = Select Ettins/ Grendels, 1 = Infinite scroll'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Nn][Tt][Rr])\b)'
      comment: 'The hand/pointer object.'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Pp][Oo][Ss][Bb])\b)'
      comment: 'Returns the object’s Position – Bottom edge of object'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Oo][Ss][Ee])\b)'
      comment: 'Returns the objects (or parts) pose – i.e. which image number it is currently using'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Oo][Ss][Ll])\b)'
      comment: 'Returns the object’s Position – Left edge of object'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Oo][Ss][Rr])\b)'
      comment: 'Returns the object’s Position – Right edge of object'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Oo][Ss][Tt])\b)'
      comment: 'Returns the object’s Position – Top edge of object'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Oo][Ss][Xx])\b)'
      comment: 'Returns the X co-ordinate of the centre point of object Targ.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Oo][Ss][Yy])\b)'
      comment: 'Returns the Y co-ordinate of the centre point of object Targ.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Rr][Ee][Ss])\b)'
      comment: 'Sets/returns the Pressure in room at object.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Pp][Ss][Rr][Cc])\b)'
      comment: 'Sets/returns the Pressure source in room at targ'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Aa][Dd][Nn])\b)'
      comment: 'Sets/returns the room''s radiation at [targ]'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Aa][Ii][Nn])\b)'
      comment: 'Get value of a property of the weather effect of a [RAIN] object.\nProperties:\n\t0=x position,\nrelative to object\n\t1=y position, relative to object\n\t2=width\n\t3=height\n\t4=angle of effect\n(updated by wind)\n\t5=speed  number of pixels moved per update\n\t6=mode  (0=stopped, 1=running,\n2=start!, 3=stop!)\n\t7=rain image number (0-11)'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Ee][Ll][Xx])\b)'
      comment: 'Returns the relative x-position of object [Targ] from the script [OWNR] object.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Ee][Ll][Yy])\b)'
      comment: 'Returns the relative y-position of object [Targ] from the script [OWNR] object.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Ee][Ss][Tt])\b)'
      comment: 'Sets/returns the objects Restitution. % of y velocity lost after collision. I.e. Bounciness.\n0%\ninfinite bounce!'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '([Rr][Mm][Nn][#])'
      comment: 'Room Neighbour count.\nNumber of neighbours a room has on a given edge.'
      set: [rvalue,rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Mm][Nn][Dd])\b)'
      comment: 'Room Neighbour door Door-open value.'
      set: [rvalue,rvalue,rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Mm][Nn][Oo])\b)'
      comment: 'Room Number. Return the room number of the current room of Targ.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Mm][Nn][Rr])\b)'
      comment: 'Room door destination room id'
      set: [rvalue,rvalue,rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '([Rr][Mm][Ss][#])'
      comment: 'Returns the number of rooms defined in the world.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Nn][Dd][Rr])\b)'
      comment: 'Renderer image format. Returns 0 if image format is 555 and 1 if it is 565.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Nn][Gg][Ee])\b)'
      comment: 'Sets/returns the range an object can see.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Oo][Oo][Mm])\b)'
      comment: '[ROOM] property values\nProperties:\n\t0 = left,\n\t1 = top\n\t2 = right\n\t3 = bottom\n\t4 = type\n\t5 =\nfloor value\n\t6 = organic nutrient\n\t7 = inorganic nutrient,\n\t8 = temperature\n\t9 = pressure\n\t10 =\nwind x component\n\t11 = wind y component\n\t12 = light level\n\t13 = radiation\n\t14 = heat source\n\t15\n= pressure source\n\t16 = light source\n\t17 = radiation source\n\t18 = visited flag\n\t19 = drop\nstatus'
      set: [rvalue,rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Ss][Rr][Cc])\b)'
      comment: 'Sets/returns the Radiation source in room at targ.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Rr][Tt][Yy][Pp])\b)'
      comment: 'Room Type. Sets/returns the type of the room at the centre point of Targ.\nReturns:\n\t(-1) -\nInvalid.\n\t0 - Under the Albian surface.\n\t1 - On the Albian surface.\n\t2 - In the sea.\n\t3 - In the\nsky.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ss][Cc][Oo][Rr])\b)'
      comment: 'Returns chronicle information concerning a particular game item. The values for item are:\n0 –\nGeneration 1 eggs used\n1 – Number of natural eggs laid\n2 – Number of deaths\n3 – Number of\ncreatures imported \n4 – Number of creatures exported\n5 – Number of creatures alive'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ss][Ee][Aa][Nn])\b)'
      comment: 'Returns the season Number: 0..3. (Spring, Summer, Autumn,\nWinter)\n\t0=Spring\n\t1=SUmmer\n\t2=Autumn\n\t3=Winter'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ss][Ee][Aa][Vv])\b)'
      comment: 'Season Value: 0..19. Returns the position within the season.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ss][Ii][Zz][Ee])\b)'
      comment: 'Sets/returns the minimum door value through which an object will pass. Door values are set up using\na Room Editor.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ss][Nn][Dd][Ss])\b)'
      comment: 'sound status\nBit 0 = Sound on/off\nBit 1 = Sound mode (foreground only\continuous)'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ss][Pp][Cc][Ss])\b)'
      comment: 'Returns the object’s species'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Tt][Aa][Rr][Gg])\b)'
      comment: 'the current object of script focus.'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Tt][Cc][Aa][Rr])\b)'
      comment: 'Returns carrier of [TARG].\nFor carrier of [OWNR] see [CARR]'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Tt][Ee][Mm][Pp])\b)'
      comment: 'Sets/returns the room temperature at [targ]'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Tt][Hh][Rr][Tt])\b)'
      comment: 'Sets/returns the THReaT, how dangerous an object is to a creature.\nThis attribute is used only for\nthe in-game music system. 255 = high threat; 0 = no threat.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Tt][Ii][Cc][Kk])\b)'
      comment: 'Gets ticks left in current timer.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Tt][Mm][Oo][Dd])\b)'
      comment: 'Time Of Day: 0..4.\n\t0=Dawn\n\t1=Morning\n\t2=Afternoon\n\t3=Evening\n\t4=Night'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Tt][Oo][Kk][Nn])\b)'
      comment: 'Convert 4 characters into an integer. Generally only used for the following commands to reference a\nstring moniker, rather than the integer they require.'
      set: [token]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Tt][Oo][Tt][Ll])\b)'
      comment: 'Returns the number of objects in the world who fit this specifier'
      set: [rvalue,rvalue,rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Tt][Oo][Uu][Cc])\b)'
      comment: 'Returns 1 if these two objects are in contact.\n@example: #{doif touc targ ownr gt 0} - DOIF [TARG]\nand [OWNR] are touching'
      set: [rvalue,rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Uu][Nn][Cc][Ss])\b)'
      comment: 'Returns 1 if the creature is unconscious, 0 otherwise.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Uu][Nn][Ii][Dd])\b)'
      comment: 'Unique Identifier.\nA UNID of zero is invalid and indicates that the object does not exist.\nNote:\nThis command has been left in for completeness, because using [TARG] will produce the same results.'
      pop: true
      scope: variable.function.caos.rvalue.agent

    - match: '(\b([Vv][Aa][Rr][0-9])\b)'
      comment: 'VAR0 to VAR9 are local variables, whose values are lost when the current script ends.\n@range(0 to\n9)'
      scope: variable.other.member.caos
      pop: true

    - match: '(\b([Vv][Aa][0-9][0-9])\b)'
      comment: 'VA00 to VA99 are local variables, whose values are lost when the current script ends.\n@range(0 to\n99)'
      scope: variable.other.member.caos
      pop: true

    - match: '(\b([Vv][Ee][Ll][Xx])\b)'
      comment: 'Sets/returns the object''s velocity in X direction.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Vv][Ee][Ll][Yy])\b)'
      comment: 'Sets/returns the object''s velocity in Y direction.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Vv][Rr][Ss][Nn])\b)'
      comment: 'Return the Creatures Build ID'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Aa][Ll][Ll])\b)'
      comment: 'WALL last collided with. 0 = left, 1 = right, 2 = up, 3 = down, 4 = unknown.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Dd][Tt][Hh])\b)'
      comment: 'Returns objects width'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Ii][Nn][Dd])\b)'
      comment: 'Wind speed/direction near [TARG] object\nAlways returns 1\nShould have had Range (-3 to +3)'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Ii][Nn][Hh])\b)'
      comment: 'Max allowed view window height (WORLD coords)'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Ii][Nn][Ww])\b)'
      comment: 'Max allowed view window width (WORLD coords)'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Ll][Dd][Hh])\b)'
      comment: 'World Height, in pixels.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Ll][Dd][Ww])\b)'
      comment: 'World Width, in pixels.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Nn][Dd][Xx])\b)'
      comment: 'Sets/returns the wind X component at [TARG]'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Ww][Nn][Dd][Yy])\b)'
      comment: 'Sets/returns the wind Y component at [TARG]'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Xx][Ii][Ss][Tt])\b)'
      comment: 'Returns 1 if specified agent exists, or 0 otherwise (ie, if it is null).'
      set: [rvalue]
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Xx][Vv][Ee][Cc])\b)'
      comment: 'Sets/returns the vehicles x-movement vector in 1/256th of a pixel.\nThis command is a legacy from\nCreatures 1 – [VELX] will work just as good.'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Yy][Ee][Aa][Rr])\b)'
      comment: 'Returns the current year in Albia. Starting with 0000 AD (first chronicled year After Disaster)'
      pop: true
      scope: variable.function.caos.rvalue.integer

    - match: '(\b([Yy][Vv][Ee][Cc])\b)'
      comment: 'Sets/returns the vehicles y-movement vector in 1/256th of a pixel.\nThis command is a legacy from\nCreatures 1 – [VELY] will work just as good.'
      pop: true
      scope: variable.function.caos.rvalue.integer
    - match: '\s+'
      scope: text

    - match: '\b([^ ]+)\b'
      scope: invalid.illegal.caos
      pop: true


  token:
    - match: '\s*\*.*$'
      scope: comment.line.caos

    - match: '\s*\b[^"'']{4}\b'
      scope: entity.name.function.caos
      pop: true

    - match: '\b.+\b'
      scope: invalid.illegal
      pop: true

  char:
    - meta_scope: constant.character.caos

    - match: '(\\.)([''])'
      pop: true
      captures:
        1: constant.character.escape.caos
        2: punctuation.definition.character.end.caos

    - match: '([^\\''])('')'
      pop: true
      captures:
        1: constant.character.caos
        2: punctuation.definition.character.end.caos

    - match: ''''
      pop: true
      scope: punctuation.definition.character.end.caos

    - match: '[^''][^'']+|\\'
      scope: invalid.illegal.caos
      pop: true

  double_quoted_string:
    - meta_scope: string.quoted.double

    - match: '\\.'
      scope: constant.character.escape.caos

    - match: '[^"]'
      scope: string.quoted.double

    - match: '"'
      pop: true
      scope: punctuation.definition.string.end.caos


  eqOp:
    - match: '\b[Ee][Qq]\b|='
      scope:  keyword.control.conditional.caos
      pop: true
      comment: "Equal"

    - match: '\b[Nn][Ee]\b|!=|<>'
      scope:  keyword.control.conditional.caos
      pop: true
      comment: Not Equal

    - match: '\b[Gg][Ee]\b|>='
      scope:  keyword.control.conditional.caos
      pop: true
      comment: Greate Than/Equal

    - match: '\b[Gg][Tt]\b|>'
      scope:  keyword.control.conditional.caos
      pop: true
      comment: Greater Than

    - match: '\b[Ll][Ee]\b|<='
      scope:  keyword.control.conditional.caos
      pop: true
      comment: Less Than/Equal

    - match: '\b[Ll][Tt]\b|<'
      scope:  keyword.control.conditional.caos
      pop: true
      comment: Less Than


    - match: '\b[Bb][Tt]\b'
      scope:  keyword.control.conditional.caos
      pop: true
      comment: Bitwise AND

    - match: '\b[Bb][Ff]\b'
      scope:  keyword.control.conditional.caos
      pop: true
      comment: Bitwise NAND or Bitwise And == False

    - match: '\b([^ ]+)\b'
      scope: invalid.illegal.caos
      pop: true
